<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Configurar Sala — Teste do Milhão</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="centered-card large">
    <header class="card-header">
      <h1>Configurar Sala</h1>
      <p class="subtitle">Defina as regras da sua sala antes de começar.</p>
    </header>

    <section class="card-body">
      <!-- Nome da sala -->
      <div class="form-row">
        <label for="roomName">Nome da Sala</label>
        <input id="roomName" type="text" placeholder="Ex: SalaDoPedro" />
      </div>

      <!-- Privacidade -->
      <div class="checkbox-row">
        <input type="checkbox" id="isPrivate" />
        <label for="isPrivate">Privada</label>
      </div>

      <!-- Senha (aparece se privada) -->
      <div class="form-row hidden" id="passwordWrapper">
        <label for="roomPassword">Senha da Sala</label>
        <input id="roomPassword" type="password" placeholder="Senha (mín. 4 chars)" />
      </div>

      <!-- Botões -->
      <div class="controls-row">
        <button id="btn-create-room" class="btn primary full">Criar Sala</button>
        <button id="btn-back" class="btn ghost full">Voltar</button>
      </div>
    </section>

    <footer class="card-footer">
      <small>Configurações aplicam apenas para esta sala</small>
    </footer>
  </main>

  <script>
    const isPrivateCheckbox = document.getElementById('isPrivate');
    const passwordWrapper = document.getElementById('passwordWrapper');
    const btnBack = document.getElementById('btn-back');
    const btnCreate = document.getElementById('btn-create-room');

    // Mostrar/ocultar campo senha
    isPrivateCheckbox.addEventListener('change', () => {
      if (isPrivateCheckbox.checked) {
        passwordWrapper.classList.remove('hidden');
      } else {
        passwordWrapper.classList.add('hidden');
      }
    });

    // Botão voltar
    btnBack.addEventListener('click', () => {
      location.href = 'index.html';
    });

    // Botão criar sala
    btnCreate.addEventListener('click', () => {
      const roomName = document.getElementById('roomName').value.trim();
      const privateChecked = isPrivateCheckbox.checked;
      const roomPassword = document.getElementById('roomPassword').value.trim();

      if (!roomName) {
        alert('Digite o nome da sala.');
        return;
      }

      if (privateChecked && roomPassword.length < 4) {
        alert('Digite uma senha com pelo menos 4 caracteres.');
        return;
      }

      // Redireciona para a tela do jogo com parâmetros
      const params = new URLSearchParams();
      params.set('room', roomName);
      params.set('password', privateChecked ? roomPassword : '');
      params.set('host', 'true');
      location.href = 'game.html?' + params.toString();
    });
  </script>
</body>
</html>
